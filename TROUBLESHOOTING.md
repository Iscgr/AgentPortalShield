# MarFaNet - راهنمای رفع مشکلات

این مستند روند رفع مشکلات در پروژه MarFaNet را توضیح می‌دهد.

## مشکلات شناسایی شده و راه‌حل‌ها

### 1. مشکل nginx.conf
فایل `nginx.conf` به جای یک فایل، یک دایرکتوری بود که باعث ایجاد خطا در هنگام راه‌اندازی کانتینر nginx می‌شد.

**راه‌حل:** حذف دایرکتوری و ایجاد فایل جدید با تنظیمات صحیح.

### 2. مشکل docker-compose.yml
در فایل `docker-compose.yml` نام سرویس‌ها با نام‌هایی که در دستور استفاده می‌شدند مطابقت نداشت.

**راه‌حل:** به‌روزرسانی فایل `docker-compose.yml` با نام‌های سرویس صحیح و تنظیمات شبکه.

### 3. مشکل اجرای TypeScript
اجرای فایل‌های TypeScript با `tsx` و `ts-node` با خطا مواجه می‌شد.

**راه‌حل:** نصب وابستگی‌های مورد نیاز، تنظیم مجدد `package.json` و ایجاد اسکریپت اجرایی جایگزین.

### 4. مشکل تعاریف تایپ
خطاهای TypeScript مربوط به تعاریف تایپ برای `session` و `ws`.

**راه‌حل:** ایجاد فایل‌های تعریف تایپ برای گسترش interface‌های موجود.

## اسکریپت‌های راه‌حل

### 1. ultimate-fix.sh
اسکریپت جامع برای رفع تمام مشکلات و اجرای برنامه:

```bash
chmod +x /workspaces/AgentPortalShield/ultimate-fix.sh
/workspaces/AgentPortalShield/ultimate-fix.sh
```

### 2. اسکریپت‌های جداگانه

برای رفع مشکلات خاص، اسکریپت‌های زیر موجود هستند:

- `fix-nginx-dir.sh`: رفع مشکل دایرکتوری nginx.conf
- `fix-docker-compose.sh`: اصلاح docker-compose.yml
- `fix-typescript-execution.sh`: رفع مشکل اجرای TypeScript

## راه‌اندازی پروژه

پس از رفع مشکلات، می‌توانید با دستور زیر پروژه را اجرا کنید:

```bash
npm run dev
```

## نکات مهم

- تمام راه‌حل‌ها بر اساس قانون طلایی "حذف نه! ارتقا" ایجاد شده‌اند.
- فایل‌های قدیمی در `tsconfig.json` از کامپایل خارج شده‌اند.
- تنظیمات به گونه‌ای انجام شده که سازگاری با Ubuntu Server 22.04/24.04 حفظ شود.

## رفع مشکلات اضافی

اگر با مشکلات دیگری مواجه شدید، لطفاً با تیم توسعه تماس بگیرید.