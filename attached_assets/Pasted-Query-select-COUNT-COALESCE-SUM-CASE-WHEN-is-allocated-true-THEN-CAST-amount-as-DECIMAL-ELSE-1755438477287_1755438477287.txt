Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1795]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1795]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1808]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1808]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1808]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1808]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1840]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1840]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1840]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1840]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1822]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1822]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1822]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1822]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1948]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1948]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1948]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1948]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1811]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1811]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1811]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1811]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1833]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1833]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1833]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1833]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1819]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1819]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1819]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1819]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1812]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1812]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1812]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1812]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1843]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1843]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1843]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1843]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1801]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1801]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1801]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1801]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1835]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1835]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1835]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1835]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1830]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1830]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1830]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1830]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1820]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1820]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1820]
Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1820]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1821]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1821]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1821]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1821]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1834]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1834]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1834]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1834]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1805]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1805]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1805]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1805]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1797]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1797]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1797]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1797]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1802]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1802]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1802]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1802]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1844]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1844]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1844]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1844]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1951]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1951]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1951]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1951]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1828]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1828]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1828]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1828]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1806]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1806]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1806]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1806]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1816]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1816]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1816]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1816]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1818]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1818]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1818]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1818]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1911]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1911]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1911]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1911]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1809]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1809]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1809]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1809]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1841]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1841]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1841]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1841]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1803]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1803]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1803]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1803]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1827]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1827]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1827]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1827]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1793]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1793]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1793]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1793]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1831]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1831]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1831]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1831]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1836]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1836]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1836]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1836]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1825]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1825]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1825]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1825]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1799]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1799]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1799]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1799]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1879]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1879]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1879]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1879]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1794]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1794]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1794]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1794]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1861]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1861]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1861]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1861]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1897]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1897]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1897]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1897]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1871]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1871]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1871]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1871]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1851]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1851]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1851]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1851]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1850]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1850]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1850]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1850]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1880]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1880]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1880]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1880]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1856]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1856]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1856]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1856]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1858]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1858]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1858]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1858]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1877]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1877]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1877]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1877]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1894]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1894]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1894]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1894]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1891]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1891]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1891]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1891]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1883]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1883]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1883]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1883]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1902]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1902]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1902]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1902]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1876]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1876]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1876]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1876]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1887]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1887]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1887]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1887]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1867]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1867]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1867]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1867]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1900]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1900]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1900]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1900]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1890]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1890]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1890]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1890]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1860]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1860]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1860]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1860]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1896]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1896]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1896]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1896]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1864]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1864]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1864]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1864]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1874]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1874]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1874]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1874]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1893]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1893]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1893]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1893]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1852]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1852]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1852]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1852]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1854]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1854]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1854]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1854]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1849]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1849]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1849]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1849]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1853]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1853]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1853]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1853]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1901]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1901]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1901]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1901]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1862]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1862]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1862]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1862]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1892]
🔓 SHERLOCK v26.0: Pass-through auth middleware - no validation
Query: select "id", "key", "value", "description", "updated_at" from "settings" where "settings"."key" = $1 -- params: ["telegram_bot_token"]
🔄 SHERLOCK v18.0: Starting global statistics generation...
🚀 SHERLOCK v18.0: Generating fresh global statistics...
🔥 SHERLOCK v18.5: Calculating fresh system health...
Query: select COALESCE(SUM(CAST(amount as DECIMAL)), 0) from "payments" where "payments"."is_allocated" = $1 -- params: [true]
Query: select 
          COALESCE(SUM(
            GREATEST(0, 
              COALESCE(inv_total.amount, 0) - COALESCE(pay_total.amount, 0)
            )
          ), 0)
         from (
        SELECT 
          r.id,
          COALESCE(SUM(CASE WHEN i.status IN ('unpaid', 'overdue') THEN CAST(i.amount as DECIMAL) ELSE 0 END), 0) as amount
        FROM representatives r
        LEFT JOIN invoices i ON r.id = i.representative_id
        GROUP BY r.id
      ) inv_total left join (
        SELECT 
          representative_id,
          COALESCE(SUM(CAST(amount as DECIMAL)), 0) as amount
        FROM payments 
        WHERE is_allocated = true
        GROUP BY representative_id
      ) pay_total on inv_total.id = pay_total.representative_id
Query: select COALESCE(SUM(CAST(amount as DECIMAL)), 0) from "payments" where "payments"."is_allocated" = $1 -- params: [false]
Query: select count(*), SUM(CASE WHEN is_active = true THEN 1 ELSE 0 END), SUM(CASE WHEN is_active = false THEN 1 ELSE 0 END) from "representatives"
Query: select COALESCE(SUM(CAST(total_sales as DECIMAL)), 0), COALESCE(SUM(CAST(total_debt as DECIMAL)), 0), SUM(CASE WHEN CAST(total_debt as DECIMAL) > 100000 THEN 1 ELSE 0 END) from "representatives"
Query: select count(*), SUM(CASE WHEN status = 'paid' THEN 1 ELSE 0 END), SUM(CASE WHEN status = 'unpaid' THEN 1 ELSE 0 END), SUM(CASE WHEN status = 'overdue' THEN 1 ELSE 0 END), SUM(CASE WHEN sent_to_telegram = false THEN 1 ELSE 0 END) from "invoices"
Query: select count(*), SUM(CASE WHEN is_active = true THEN 1 ELSE 0 END) from "sales_partners"
Query: select COUNT(*) from "representatives" where CAST(total_debt as DECIMAL) > 100000
Query: select "id", "type", "description", "related_id", "metadata", "created_at" from "activity_logs" where "activity_logs"."created_at" >= $1 order by "activity_logs"."created_at" desc limit $2 -- params: ["2025-08-10T13:44:25.404Z", 5]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1892]
✅ GET /api/settings/telegram_bot_token 200 in 29ms
Representative Overview Debug: {
  countStats: { totalCount: 245, activeCount: '245', inactiveCount: '0' },
  financialStats: {
    totalSales: '282379890.00',
    totalDebt: '196754290.00',
    riskCount: '158'
  }
}
Query: select COUNT(*) from "representatives" where "representatives"."is_active" = $1 -- params: [true]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1892]
1:44:25 PM [express] GET /api/settings/telegram_bot_token 200 in 84ms :: {"id":19,"key":"telegram_bo…
Query: select "id" from "representatives" where "representatives"."is_active" = $1 order by RANDOM() limit $2 -- params: [true, 5]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1892]
1:44:25 PM [express] GET /api/unified-financial/health 200 in 29ms
Query: select "total_debt", "total_sales" from "representatives" where "representatives"."id" = $1 -- params: [1891]
Query: select "total_debt", "total_sales" from "representatives" where "representatives"."id" = $1 -- params: [1794]
Query: select "total_debt", "total_sales" from "representatives" where "representatives"."id" = $1 -- params: [2007]
Query: select "total_debt", "total_sales" from "representatives" where "representatives"."id" = $1 -- params: [1998]
Query: select "total_debt", "total_sales" from "representatives" where "representatives"."id" = $1 -- params: [1959]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1859]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1859]
✅ SHERLOCK v18.5: System health calculated (5 samples)
⏱️ Calculations completed in 160ms
✅ SHERLOCK v18.0: Global statistics generated in 160ms
✅ GET /global 200 in 161ms
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1859]
1:44:25 PM [express] GET /api/unified-statistics/global 200 in 183ms :: {"success":true,"data":{"tot…
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1859]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1878]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1878]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1878]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1878]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1884]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1884]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1884]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1884]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1875]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1875]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1875]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1875]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1872]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1872]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1872]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1872]
🔓 SHERLOCK v26.0: No-validation middleware - allowing all requests
🚀 SHERLOCK v18.7: Fresh calculation for 30 debtors
🚀 SHERLOCK v23.0: Ultra-optimized debtor calculation for 30 records
Query: select "id", "name", "code", "total_debt" from "representatives" where CAST(total_debt as DECIMAL) > 1000 order by CAST(total_debt as DECIMAL) desc limit $1 -- params: [45]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1873]
🔓 SHERLOCK v26.0: No-validation middleware - allowing all requests
🔍 SHERLOCK v24.0: Fetching corrected debt summary...
Query: select COUNT(*) from "representatives"
⚡ Pre-filtered to 45 candidates in 22ms
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1845]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [2009]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1913]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1873]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1942]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1888]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1842]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1947]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1855]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1792]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1863]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1973]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1898]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1931]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1847]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1930]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1873]
💰 SHERLOCK v24.0: Using corrected system debt: 147,853,390 تومان
👥 SHERLOCK v24.0: Total representatives: 245
✅ GET /summary 200 in 27ms
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1845]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [2009]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1913]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1873]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1942]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1888]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1855]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1842]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1947]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1792]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1863]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1973]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1898]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1931]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1847]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1930]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1873]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1845]
1:44:26 PM [express] GET /api/unified-financial/summary 200 in 105ms :: {"success":true,"data":{"tot…
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1873]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1913]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [2009]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1942]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1888]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1855]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1842]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1947]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1792]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1863]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1973]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1898]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1931]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1847]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1930]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1873]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1826]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1961]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1981]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1969]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1956]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1916]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1954]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1829]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1988]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1946]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1962]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1938]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1866]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1826]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1961]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1981]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1969]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1956]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1916]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1954]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1829]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1988]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1946]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1962]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1938]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1866]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1961]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1826]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1981]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1916]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1969]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1956]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1954]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1829]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1988]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1946]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1962]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1938]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1866]
✅ SHERLOCK v23.0: Generated 30 debtors in 440ms
✅ SHERLOCK v18.7: Generated 30 debtors in 440ms
🟡 MODERATE GET /debtors?limit=30 200 in 440ms
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1866]
1:44:26 PM [express] GET /api/unified-financial/debtors 200 in 464ms :: {"success":true,"data":[{"id…
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1885]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1885]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1885]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1885]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1881]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1881]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1881]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1881]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1895]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1895]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1895]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1895]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1868]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1868]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1868]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1868]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1888]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1899]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1899]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1899]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1899]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1863]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1865]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1865]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1865]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1865]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1845]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1855]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1958]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1958]
Query: select COUNT(*), COALESCE(SUM(CASE WHEN is_allocated = true THEN CAST(amount as DECIMAL) ELSE 0 END), 0), MAX(payment_date) from "payments" where "payments"."representative_id" = $1 -- params: [1958]
Query: select "total_debt" from "representatives" where "representatives"."id" = $1 -- params: [1958]
Query: select "id", "name", "code" from "representatives" where "representatives"."id" = $1 -- params: [1870]
Query: select COUNT(*), COALESCE(SUM(CAST(amount as DECIMAL)), 0), MAX(created_at) from "invoices" where "invoices"."representative_id" = $1 -- params: [1870]
